用百度接口完成文本情感识别（定制版）
# 主要工作
把文本数据的情感分析的均值给下游同学做预测
# 实现过程

## 1先跑了几个现有模型
准确率大概到90过一些不太稳定
```java
  64/3426 [..............................] - ETA: 0s - loss: 3.0730e-04 - acc: 1.0000
 320/3426 [=>............................] - ETA: 0s - loss: 5.3526e-04 - acc: 1.0000
 576/3426 [====>.........................] - ETA: 0s - loss: 6.2609e-04 - acc: 1.0000
 768/3426 [=====>........................] - ETA: 0s - loss: 5.2458e-04 - acc: 1.0000
 960/3426 [=======>......................] - ETA: 0s - loss: 6.2188e-04 - acc: 1.0000
1152/3426 [=========>....................] - ETA: 0s - loss: 5.8333e-04 - acc: 1.0000
1344/3426 [==========>...................] - ETA: 0s - loss: 5.5844e-04 - acc: 1.0000
1536/3426 [============>.................] - ETA: 0s - loss: 5.3958e-04 - acc: 1.0000
1728/3426 [==============>...............] - ETA: 0s - loss: 5.2646e-04 - acc: 1.0000
1984/3426 [================>.............] - ETA: 0s - loss: 5.0477e-04 - acc: 1.0000
2176/3426 [==================>...........] - ETA: 0s - loss: 4.9004e-04 - acc: 1.0000
2368/3426 [===================>..........] - ETA: 0s - loss: 4.9039e-04 - acc: 1.0000
2560/3426 [=====================>........] - ETA: 0s - loss: 4.9827e-04 - acc: 1.0000
2752/3426 [=======================>......] - ETA: 0s - loss: 4.9076e-04 - acc: 1.0000
2944/3426 [========================>.....] - ETA: 0s - loss: 4.8898e-04 - acc: 1.0000
3136/3426 [==========================>...] - ETA: 0s - loss: 0.0011 - acc: 0.9997    
3328/3426 [============================>.] - ETA: 0s - loss: 0.0011 - acc: 0.9997
3426/3426 [==============================] - 1s 289us/step - loss: 0.0011 - acc: 0.9997
D:\anaconda3\envs\test\lib\site-packages\tensorflow_core\python\framework\indexed_slices.py:433: UserWarning: Converting sparse IndexedSlices to a dense Tensor of unknown shape. This may consume a large amount of memory.
  "Converting sparse IndexedSlices to a dense Tensor of unknown shape. "
[0.93115519]

Process finished with exit code 0
```
然后加上对整体的实时性，所以选择了接口，腾讯，百度，讯飞都有，百度量大，选择了百度。
## 2使用定制版百度云的api
这个阶段开始找数据集，微博为主，最后找到标注的微博内容数据正负大概各5w条，准确率到97.12%，通用的在71%，前期有寻找测试数据，最终敲定到这个

## 3使用初阶段
接口返回信息是这样的：

```java
{
    "text":"苹果是一家伟大的公司",
    "items":[
        {
            "sentiment":2,    //表示情感极性分类结果
            "confidence":0.40, //表示分类的置信度
            "positive_prob":0.73, //表示属于积极类别的概率
            "negative_prob":0.27  //表示属于消极类别的概率
        }
    ]
}
```
最初考虑当天多条数据的正面信息的概率做一个平均值，负面的概率做一个平均值，然后这两个再做平均值，但是固定在接近0.5,思路有问题，随即改变成统计个数然后做平均，集中在版本初始

## 5使用中阶段
这个阶段是把错误改正然后用统计的个数，这个版本就是发现问题解决问题再统计
期间主要问题就是编码问题和接口访问的次数限制问题，前者用myencoder里的重写类解决，后者是用了同学的百度云账户训练同样的加快速度
集中在2.0和3.0
## 6交工阶段
这个阶段就是把函数进行整合为4.0版本，调用函数就返回一个列表把这段时间的每天均值进行传输



### 
